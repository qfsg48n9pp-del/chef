<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Pro - Ù…Ù†ØµØ© ÙØ§Ù„Ø­ Ø§Ù„Ù‡Ø±ÙƒØ§Ù†</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #FF0050; --secondary: #00F2EA; --dark: #121212; --gold: #FFD700; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--dark); color: white; direction: rtl; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ØµÙ„ÙŠØ© */
        .auth-container { max-width: 400px; margin: 50px auto; padding: 30px; background: rgba(255, 255, 255, 0.05); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .logo { font-size: 2.5rem; font-weight: bold; background: linear-gradient(45deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; margin-bottom: 20px; }
        .input-group { margin-bottom: 15px; }
        .input-group input { width: 100%; padding: 15px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px; color: white; }
        .btn-primary { width: 100%; padding: 15px; border-radius: 10px; background: linear-gradient(45deg, var(--primary), var(--secondary)); border: none; color: white; font-weight: bold; cursor: pointer; }
        
        /* Ø±ØªØ¨Ø© ÙØ§Ù„Ø­ Ø§Ù„ÙØ®Ù…Ø© */
        .owner-badge { color: var(--gold); border: 1px solid var(--gold); padding: 2px 8px; border-radius: 5px; font-size: 0.8rem; margin-right: 5px; }
        .verified-badge { color: var(--secondary); margin-right: 5px; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .app-header { position: fixed; top: 0; width: 100%; background: rgba(18, 18, 18, 0.95); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; z-index: 1000; }
        #app { display: none; padding-top: 80px; }
    </style>
</head>
<body>

    <div id="authPages">
        <div class="auth-container">
            <h1 class="logo">TikTok Pro</h1>
            <div id="regFields" style="display: none;">
                <div class="input-group">
                    <input type="text" id="regUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (ÙØ§Ù„Ø­ Ø§Ù„Ù‡Ø§Ø¬Ø±ÙŠ)">
                </div>
            </div>
            <div class="input-group">
                <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            </div>
            <div class="input-group">
                <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            <button id="mainBtn" class="btn-primary" onclick="handleAuth()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            <p style="text-align: center; margin-top: 15px; color: #888; cursor: pointer;" onclick="toggleMode()" id="toggleText">
                Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <b>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</b>
            </p>
            <p id="errorMsg" style="color: var(--primary); text-align: center; margin-top: 10px;"></p>
        </div>
    </div>

    <div id="app">
        <header class="app-header">
            <div class="logo" style="font-size: 1.5rem;">TikTok Pro</div>
            <div id="userDisplay"></div>
            <button onclick="logout()" style="background: none; border: none; color: white; cursor: pointer;"><i class="fas fa-sign-out-alt"></i></button>
        </header>
        
        <div style="padding: 20px; text-align: center;">
            <h2 id="welcomeMsg"></h2>
            <p style="margin-top: 20px; color: #888;">Ø§Ù„Ù…Ù†ØµØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙŠØ§ Ø£ÙˆÙ†Ø± ğŸ¦¾</p>
            </div>
    </div>

    <script>
        // âš ï¸ ÙØ§Ù„Ø­ØŒ Ù‡Ù†Ø§ ØªØ­Ø· Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù„ÙŠ ÙÙŠ Ø´Ø§Ø´Ø© Firebase Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ Ø¹Ù†Ø¯Ùƒ âš ï¸
        const firebaseConfig = {
            apiKey: "Ø¶Ø¹_Ù‡Ù†Ø§_Ø§Ù„Ù€_API_KEY",
            authDomain: "Ù…Ø´Ø±ÙˆØ¹Ùƒ.firebaseapp.com",
            projectId: "Ù…Ø´Ø±ÙˆØ¹Ùƒ",
            storageBucket: "Ù…Ø´Ø±ÙˆØ¹Ùƒ.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:xxxx"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let isLogin = true;

        function toggleMode() {
            isLogin = !isLogin;
            document.getElementById('regFields').style.display = isLogin ? 'none' : 'block';
            document.getElementById('mainBtn').innerText = isLogin ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯';
            document.getElementById('toggleText').innerHTML = isLogin ? 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <b>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</b>' : 'Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <b>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</b>';
        }

        async function handleAuth() {
            const email = document.getElementById('loginEmail').value;
            const pass = document.getElementById('loginPassword').value;
            const userNm = document.getElementById('regUsername').value;

            try {
                let res;
                if (isLogin) {
                    res = await auth.signInWithEmailAndPassword(email, pass);
                } else {
                    res = await auth.createUserWithEmailAndPassword(email, pass);
                }

                // ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨ ÙØ§Ù„Ø­ (Ø£ÙˆÙ†Ø± ÙˆÙ…ÙˆØ«Ù‚) [cite: 2026-01-22]
                let role = (email === "faleh370@icloud.com") ? "owner" : "user";
                let verified = (email === "faleh370@icloud.com");
                let name = (email === "faleh370@icloud.com") ? "ÙØ§Ù„Ø­ Ø§Ù„Ù‡Ø±ÙƒØ§Ù†" : (userNm || "Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯");

                await db.collection('users').doc(res.user.uid).set({
                    username: name,
                    role: role,
                    isVerified: verified,
                    email: email
                }, { merge: true });

                showApp(name, role, verified);
            } catch (err) {
                document.getElementById('errorMsg').innerText = "Ø®Ø·Ø£: " + err.message;
            }
        }

        function showApp(name, role, verified) {
            document.getElementById('authPages').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            
            let badge = role === 'owner' ? '<span class="owner-badge">OWNER</span>' : '';
            let vBadge = verified ? '<i class="fas fa-check-circle verified-badge"></i>' : '';
            
            document.getElementById('userDisplay').innerHTML = badge + " " + vBadge;
            document.getElementById('welcomeMsg').innerHTML = "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ " + name;
        }

        function logout() { auth.signOut().then(() => location.reload()); }
    </script>
</body>
</html>
